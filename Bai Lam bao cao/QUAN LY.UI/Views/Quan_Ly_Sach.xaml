<UserControl x:Class="QUAN_LY.UI.Views.Quan_Ly_Sach"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:QUAN_LY.UI.Views"
             mc:Ignorable="d" 
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"

             d:DesignHeight="540" d:DesignWidth="720">


    <Border Background="#FF7DCE7D" Padding="10" CornerRadius="8"
            HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- ===== Thông tin sách ===== -->
            <GroupBox FontWeight="Bold" Grid.Row="0" Margin="0,0,0,10">
                <GroupBox.Header>
                    <TextBlock Text="Thông Tin Sách" 
                               HorizontalAlignment="Center"
                               FontWeight="Bold"
                               FontSize="14"/>
                </GroupBox.Header>

                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="220"/>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="150"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <!-- ⬇️ ĐÃ THÊM -->
                        <RowDefinition Height="Auto"/>
                        <!-- ⬆️ HẾT PHẦN THÊM -->
                    </Grid.RowDefinitions>

                    <!-- Dòng 1 -->
                    <TextBlock Text="Thời Hạn Mượn" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" ></TextBlock>
                    <xctk:IntegerUpDown Minimum="1" Maximum="30" x:Name="txtThoihanmuon" Grid.Row="0" Margin="15,5,25,5" Grid.Column="1" />
                    <TextBlock Text="NXB:" Grid.Row="0" Grid.Column="3" VerticalAlignment="Center"/>
                    <TextBox x:Name="txtNXB" Grid.Row="0" Grid.Column="4" Margin="15,5,-45,5" Width="180"/>

                    <!-- Dòng 2 -->
                    <TextBlock Text="Thể Loại:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                    <TextBox x:Name="txtTheLoai" Grid.Row="1" Grid.Column="1" Margin="15,5,25,5"/>

                    <TextBlock Text="Ngày Nhập:" Grid.Row="1" Grid.Column="3" VerticalAlignment="Center"/>
                    <DatePicker x:Name="dpNgayNhap" Grid.Row="1" Grid.Column="4" Margin="15,5,-45,5"/>

                    <!-- Dòng 3 -->
                    <TextBlock Text="Tên Sách:" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                    <TextBox x:Name="txtTieude" Grid.Row="2" Grid.Column="1" Margin="15,5,25,5"/>

                    <TextBlock Text="SL Tồn:" Grid.Row="2" Grid.Column="3" VerticalAlignment="Center"/>
                    <xctk:IntegerUpDown Grid.Row="2" Grid.Column="4" Margin="15,5,-45,5" x:Name="txtSLTon"     
                                        ClipValueToMinMax="True"
                                        AllowSpin="False"
                                        FormatString="N0" 
                                        Minimum="0" Maximum="1000" />

                    <!-- Dòng 4 -->
                    <TextBlock Text="Tác Giả:" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center"/>
                    <TextBox x:Name="txtTacGia" Grid.Row="3" Grid.Column="1" Margin="15,5,25,5"/>
                    <TextBlock Text="SL Mượn:" Grid.Row="3" Grid.Column="3" VerticalAlignment="Center"/>
                    <xctk:IntegerUpDown Minimum="0" Maximum="1000" x:Name="txtSLMuon" Grid.Row="3" Grid.Column="4" Margin="15,5,-45,5"/>

                    <!-- ⬇️ ĐÃ THÊM -->
                    <!-- Dòng 5: Mô tả sách -->
                    <TextBlock Text="Mô Tả:" Grid.Row="4" Grid.Column="0" VerticalAlignment="Top" Margin="2,25,0,0"/>
                    <TextBox x:Name="txtMota" 
                             Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="4"
                             Margin="15,5,-42,5"
                             Height="60"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"/>
                    <!-- ⬆️ HẾT PHẦN THÊM -->

                </Grid>
            </GroupBox>

            <!-- ===== Nút chức năng + Tìm kiếm ===== -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,10">
                <TextBox Width="150" Margin="5" VerticalAlignment="Center" 
                         ToolTip="Nhập tên sách hoặc tác giả để tìm" 
                         x:Name="txtTimKiem"/>
                <Button x:Name="btn_Themsach"  Content="Thêm" Width="80" Margin="5" Click="btn_Themsach_Click"/>
                <Button x:Name="btn_Xoasach" Content="Xóa" Width="80" Margin="5" Click="Xoa_Click" />
                <Button x:Name="btn_Capnhat" Content="Cập nhật" Width="100" Margin="5" Click="Cap_Nhat_Click"/>
                <Button x:Name="btn_In" Content="In" Width="80" Margin="5"  />
            </StackPanel>

            <!-- ===== Danh sách sách ===== -->
            <DataGrid x:Name="dgSach" Grid.Row="2" AutoGenerateColumns="False" IsReadOnly="True" Margin="0,5,0,0"
                      HorizontalAlignment="Stretch" VerticalAlignment="Stretch" SelectionChanged="dgSach_SelectionChanged">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Mã Sách" Binding="{Binding MaSach}" Width="60"/>
                    <DataGridTextColumn Header="Thể Loại" Binding="{Binding TheLoai}"/>
                    <DataGridTextColumn Header="Tên Sách" Binding="{Binding TieuDe}"/>
                    <DataGridTextColumn Header="Tác Giả" Binding="{Binding TacGia}"/>
                    <DataGridTextColumn Header="NXB" Binding="{Binding NhaXuatBan}"/>
                    <DataGridTextColumn Header="Ngày Nhập" Binding="{Binding NgayNhap,StringFormat={}{0:yyyy-MM-dd}}"/>
                    <DataGridTextColumn Header="SL Tồn" Binding="{Binding SoLuongTon}"/>
                    <DataGridTextColumn Header="SL Mượn" Binding="{Binding SoLuongMuon}"/>
                    <DataGridTextColumn Header="Thời Hạn Mượn (Ngày)" Binding="{Binding Thoihanmuon}"/>
                    <DataGridTextColumn Header="Mô tả" Binding="{Binding Mota}"/>
                </DataGrid.Columns>
            </DataGrid>
            <Border BorderBrush="Black" BorderThickness="1" Grid.Row="2"/>
        </Grid>
    </Border>
</UserControl>
